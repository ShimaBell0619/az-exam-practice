# DevOps セキュリティプロセス チェック項目

## 概要

このドキュメントは、Microsoft Security Benchmark for Azure の「DS-5: DevOps パイプラインへの動的アプリケーションセキュリティテストの統合」および関連するセキュリティ要件に基づいて作成されたチェック項目です。実際の DevOps プロセスに適用することで、セキュアな開発・運用を実現できます。

## 1. 動的アプリケーションセキュリティテスト (DAST) の統合

### 1.1 DAST ツールの導入

- [ ] CI/CD パイプラインに DAST ツールを統合済み
- [ ] Azure DevOps Marketplace または GitHub からの適切な DAST ツールを選定済み
- [ ] DAST ツールのライセンスおよび設定が完了済み
- [ ] ランタイムでのアプリケーションテストが自動実行される設定が完了

### 1.2 ゲート制御の実装

- [ ] テスト結果に基づくゲート制御が CI/CD ワークフローに実装済み
- [ ] 脆弱性が検出された場合の自動的なパッケージビルド停止機能が設定済み
- [ ] 本番環境へのデプロイ前での脆弱性チェックが義務化済み
- [ ] 重要度に応じた脆弱性の閾値設定が完了済み

### 1.3 自動ペネトレーションテスト

- [ ] 自動ペネトレーションテストが DAST プロセスに組み込み済み
- [ ] 手動アシスト付きバリデーションプロセスが確立済み
- [ ] ペネトレーションテストの結果レポート生成が自動化済み
- [ ] 定期的な攻撃シミュレーションテストの実行スケジュールが設定済み

## 2. 静的アプリケーションセキュリティテスト (SAST) の実装

### 2.1 SAST ツールの統合

- [ ] 開発環境でのリアルタイム脆弱性検出機能が有効
- [ ] コード分析による脆弱性の自動検出が実装済み
- [ ] .NET Compiler Platform (Roslyn) Analyzers などのリンターが設定済み
- [ ] コードチャーン、テスト結果、カバレッジと組み合わせたスキャンタスクが実行中

### 2.2 シークレットスキャニング

- [ ] パイプライン内でのソースコード内の認証情報検出機能が有効
- [ ] 認証情報がソースコードリポジトリにプッシュされることを防ぐ仕組みが実装済み
- [ ] GitHub Advanced Security または同等のツールでのシークレットスキャンが有効
- [ ] 検出された認証情報の自動アラート機能が設定済み

## 3. 依存関係とサプライチェーンセキュリティ

### 3.1 依存関係スキャニング

- [ ] サードパーティライブラリとフレームワークコンポーネントのスキャンが継続的統合プロセスに組み込み済み
- [ ] 脆弱なコンポーネントがフラグ付けされた場合の調査プロセスが確立済み
- [ ] 依存関係の脆弱性レビュー機能が有効
- [ ] パッケージ/依存関係スキャンが自動実行される設定が完了

### 3.2 コードの再利用とライブラリ管理

- [ ] セキュリティ検証済みのコードとライブラリの再利用が推進済み
- [ ] 新規コード開発時の既存ライブラリ優先使用のガイドラインが確立済み
- [ ] Azure マネージドサービスの活用によるコード削減が実装済み
- [ ] コードフットプリント削減によるセキュリティ欠陥リスク軽減策が実施済み

## 4. セキュアコーディング実践

### 4.1 セキュアコーディングガイドライン

- [ ] 業界標準のセキュアコーディング実践が採用済み
- [ ] デフォルトで拒否のアプローチを採用したコード作成ガイドラインが確立済み
- [ ] 特定のエンティティのみへのアクセス許可リスト作成プロセスが実装済み
- [ ] 特権操作の許可判定における厳格なコード記述規則が設定済み

### 4.2 開発環境のセキュリティ

- [ ] 開発者ワークステーションが強力なネットワーク制御で保護済み
- [ ] 開発者ワークステーションが適切なアイデンティティ制御で保護済み
- [ ] セキュリティアップデートの迅速な適用プロセスが確立済み
- [ ] 開発環境の露出防止策が実装済み

## 5. 脅威モデリング

### 5.1 脅威分析プロセス

- [ ] 潜在的な脅威の特定とコントロールの列挙プロセスが確立済み
- [ ] アプリケーションコンポーネント、データ接続、関係性の分析が実施済み
- [ ] アップストリーム・ダウンストリーム接続を含む包括的分析が完了済み
- [ ] 潜在的な脅威と攻撃ベクターのリスト化が実施済み

### 5.2 脅威モデリングツール

- [ ] Microsoft 脅威モデリングツールまたは同等のツールが導入済み
- [ ] STRIDE モデルを使用した内部・外部脅威の列挙が実施済み
- [ ] 脅威シナリオが DevOps プロセスに含まれて分析済み
- [ ] 脅威モデリング結果の記録と更新プロセスが確立済み

## 6. 監査とコンプライアンス

### 6.1 監査ログ管理

- [ ] 管理者および他のユーザーによる予期しない使用パターンの監視が実装済み
- [ ] Azure DevOps 組織の監査ログへのアクセス、フィルタリング、エクスポート機能が設定済み
- [ ] 長期保存と詳細なログクエリのための監査ストリーム作成が完了済み
- [ ] Azure Monitor Log Analytics または SIEM システムとの統合が実装済み

### 6.2 継続的テスト

- [ ] セキュリティテストの組み合わせ実施が標準プロセスに組み込み済み
- [ ] 単体テスト、コード分析、シークレットスキャンの統合実施が確立済み
- [ ] デプロイされたアプリケーションでの定期的なセキュリティテストの実行スケジュールが設定済み
- [ ] オープンポート、エンドポイント、攻撃の監視が実装済み

## 7. クラウドセキュリティ統合

### 7.1 Microsoft Defender for Cloud

- [ ] Microsoft Defender for Cloud との統合が完了済み
- [ ] CI/CD ワークフローでの脆弱なコンテナイメージ識別機能が有効
- [ ] ワークロード保護機能がアプリケーションワークロードのサブスクリプションで有効
- [ ] DevOps セキュリティ機能でのマルチパイプライン環境保護が実装済み

### 7.2 Azure Policy と ARM テンプレート

- [ ] IaC（Infrastructure as Code）でのガードレール定義が ARM テンプレートに実装済み
- [ ] リソースプロビジョニングでの Azure Policy による監査・制限機能が設定済み
- [ ] 環境にプロビジョニング可能なサービスや設定の制限が実装済み
- [ ] 事前のセキュリティガードレール展開による本番環境での驚きの回避策が確立済み

## 8. ステークホルダーと責任

### 8.1 セキュリティステークホルダー

- [ ] アプリケーションセキュリティおよび DevSecOps チームの役割が明確化済み
- [ ] ポスチャー管理チームの責任範囲が定義済み
- [ ] セキュリティ機能を担当する全ステークホルダーとの連携体制が確立済み
- [ ] セキュリティコントロールの組織全体での DevOps 標準への組み込みが完了済み

## 9. 継続的改善

### 9.1 定期的なレビューと更新

- [ ] セキュリティコントロールの定期的なレビュープロセスが確立済み
- [ ] 脅威ランドスケープの変化に応じた脅威モデリングの更新プロセスが実装済み
- [ ] ツールとプロセスの有効性評価の定期実施が計画済み
- [ ] セキュリティインシデントからの学習と改善のフィードバックループが確立済み

## 使用方法

1. 各チェック項目を定期的（月次または四半期）にレビューしてください
2. 未実装の項目については実装計画を策定してください
3. チェック項目の完了状況をチーム内で共有してください
4. 新しい脅威や技術の変化に応じてチェック項目を更新してください

## 参考リンク

- [Azure Security Benchmark - DevOps security](https://learn.microsoft.com/ja-jp/security/benchmark/azure/mcsb-devops-security)
- [Microsoft Security Development Lifecycle (SDL)](https://www.microsoft.com/securityengineering/sdl/)
- [GitHub Advanced Security](https://docs.github.com/en/get-started/learning-about-github/about-github-advanced-security)
- [Azure DevOps Marketplace - DAST Tools](https://marketplace.visualstudio.com/search?term=DAST&target=AzureDevOps&category=All%20categories)

---

**作成日:** 2025 年 7 月 21 日  
**更新日:** -  
**バージョン:** 1.0
