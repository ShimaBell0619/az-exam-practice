# Azure App Service：専用環境（ASE）と共有環境（マルチテナント）の比較

## 1. はじめに

Azure App Serviceでは、アプリケーションをホストする際に以下の2つの提供形態から選択できます：

- **共有環境（マルチテナント）**: Standard、Premium等の一般的なApp Service
- **専用環境（ASE: App Service Environment）**: 完全に分離された専用の実行環境

お客様の要件に最適な選択をしていただくため、それぞれの特徴と違いをご説明します。

---

## 2. それぞれの特徴

### 2-1. 共有環境（マルチテナント）

概要：

- Azureが管理する共有インフラストラクチャ上でアプリケーションを実行
- 他の顧客と同じ物理基盤（サーバー、ネットワーク）を共有
- アプリケーション自体は論理的に分離されているが、基盤インフラは共有

利用場面：

- 一般的なWebアプリケーション・API
- コスト効率を重視する場合
- 迅速なスケールアウトが必要な場合
- 開発・テスト環境

### 2-2. 専用環境（App Service Environment）

概要：

- お客様専用のVirtual Network（VNet）内に構築
- 他の顧客とは完全に分離された環境
- コンピュートリソースが完全に専有（必要に応じて物理的にも分離可能）

利用場面：

- 高いセキュリティ要件がある場合
- 厳格なネットワーク分離が必要
- 大規模システム（30インスタンス以上）
- 内部業務システム・コンプライアンス要件

---

## 3. 主な違いの比較

| 項目             | 共有環境（マルチテナント）                           | 専用環境（ASE）                                   |
| ---------------- | ---------------------------------------------------- | ------------------------------------------------- |
| **インフラ分離** | 論理分離（共有基盤）                                 | 完全分離（専用基盤）                              |
| **ネットワーク** | VNet統合は送信のみ（受信はPrivate Endpoint等が必要） | VNet内に完全統合（プライベートIPでの受信可能）    |
| **スケール上限** | 最大30インスタンス/プラン                            | 最大100インスタンス/プラン（200インスタンス/ASE） |
| **スケール速度** | 高速（共有プールから即座に割当）                     | 低速（専用環境のため時間要）                      |
| **セキュリティ** | 標準的な分離                                         | 完全分離・プライベートCA対応                      |
| **コスト**       | 低コスト                                             | 高コスト（専用リソースのため）                    |
| **運用管理**     | Azureが自動管理                                      | 一部手動管理が必要                                |

---

## 4. 選定ポイント・ユースケース例

### 共有環境を選ぶべき場合

✅ **コスト最適化が優先**  
✅ **迅速なスケールアウトが必要**  
✅ **一般的なWebアプリケーション**  
✅ **開発・テスト環境**  

**代表例**: ECサイト、企業Webサイト、SaaSアプリケーション

### 専用環境を選ぶべき場合

✅ **厳格なセキュリティ・コンプライアンス要件**  
✅ **ネットワーク完全分離が必要**  
✅ **大規模システム（30+インスタンス）**  
✅ **プライベート証明書が必要**  

**代表例**: 金融系システム、医療系システム、基幹業務システム

---

## 5. まとめ

### 重要な判断基準

1. **ネットワーク要件**: 完全分離が必要か、VNet統合で十分か
2. **セキュリティ要件**: 共有基盤で問題ないか、専用環境が必須か  
3. **スケール要件**: 30インスタンス以下か、それ以上か
4. **コスト**: 予算制約とのバランス

### 推奨アプローチ

- **段階的移行**: まず共有環境で開始し、要件に応じてASEへ移行
- **ハイブリッド構成**: 重要なアプリはASE、その他は共有環境で運用
- **用途別使い分け**: 本番環境はASE、開発環境は共有環境

お客様の具体的な要件をお聞かせいただければ、最適な構成をご提案いたします。

---

## 参考資料

- [App Service Environment v3 and App Service public multitenant comparison](https://learn.microsoft.com/en-us/azure/app-service/environment/ase-multi-tenant-comparison)
- [App Service Environment overview](https://learn.microsoft.com/en-us/azure/app-service/environment/overview)
- [App Service overview](https://learn.microsoft.com/en-us/azure/app-service/overview)
